<% extend("master.ejs") %>
    <!-- Page Heading -->
    <div class="d-sm-flex align-items-center justify-content-between mb-4">
        <h1 class="h3 mb-0 text-gray-800">Cập nhật thông tin bài đăng</h1>
    </div>
    <!-- Content Row -->
    <div class="row">
        <div class="col-10 mx-auto">
            <form id="formUpdatePost">
                <div class="form-group">
                    <label for="titlePost">Tiêu đề</label>
                    <input type="text" class="form-control" id="titlePost" name="titlePost" placeholder="Post's title"
                        value="<%= post.title%>">
                </div>
                <div class="form-group">
                    <label for="address">Bài viết phục vụ:</label>
                    <div class="form-row">
                        <div class="form-group col-4">
                            <select id="forDoctorId" class="form-control" name="forDoctorId">
                                <% if(post.forDoctorId> 0) { %>
                                    <% doctors.forEach(function(x) { %>
                                        <option value="<%= x.id %>" <% if(x.id===post.forDoctorId){%> selected <%}%> >
                                                <%= x.name %>
                                        </option>
                                        <% }) %>
                                            <% } else { %>
                                                <option value="-1" selected>Không bác sĩ nào được chọn</option>
                                                <% doctors.forEach(function(x) { %>
                                                    <option value="<%= x.id %>">
                                                        <%= x.name %>
                                                    </option>
                                                    <% }) %>
                                                        <% } %>
                            </select>
                        </div>
                        <div class="form-group col-4">
                            <select id="forClinicId" class="form-control" name="forClinicId">
                                <% if(post.forClinicId> 0) { %>
                                    <% clinics.forEach(function(x) { %>
                                        <option value="<%= x.id %>" <% if(x.id===post.forClinicId){%> selected <%}%>>
                                                <%= x.name %>
                                        </option>
                                        <% }) %>
                                            <% } else { %>
                                                <option value="-1" selected>Không phòng khám nào được chọn</option>
                                                <% clinics.forEach(function(x) { %>
                                                    <option value="<%= x.id %>">
                                                        <%= x.name %>
                                                    </option>
                                                    <% }) %>
                                                        <% } %>
                            </select>
                        </div>
                        <div class="form-group col-4">
                            <select id="forSpecializationId" class="form-control" name="forSpecializationId">
                                <% if(post.forSpecializationId> 0) { %>
                                    <% specializations.forEach(function(x) { %>
                                        <option value="<%= x.id %>" <% if(x.id===post.forSpecializationId){%> selected
                                            <%}%>> <%= x.name %>
                                        </option>
                                        <% }) %>
                                            <% } else { %>
                                                <option value="-1" selected>Không chuyên khoa nào được chọn</option>
                                                <% specializations.forEach(function(x) { %>
                                                    <option value="<%= x.id %>">
                                                        <%= x.name %>
                                                    </option>
                                                    <% }) %>
                                                        <% } %>

                            </select>
                        </div>
                    </div>
                </div><div class="form-group">
                    <label for="image-post">Hình ảnh</label>
                    <input type="file" id="image-post" accept="image/*" onchange="loadFilePost(event)">
                </div>

                <div class="form-group">
                    <% if(post.image) { %>
                        <img class="img-preview-post-create" id="image-preview" style="width: 100%;" src="/images/posts/<%= post.image %>">
                        <% } else { %>
                            <img class="img-preview-post-create d-none" style="width: 100%;" id="image-preview">
                            <% } %>
                </div>




                <div class="form-group">
                    <img class="img-preview-post-create d-none" id="image-preview">
                </div>
                <div class="form-group">
                    <label for="title-post">Mô tả sơ qua về bài viết</label>
                    <textarea type="text" class="form-control" id="title-post" name="desc"
                        placeholder="Mô tả sơ qua bài viết" rows="10"><%= post.desc%></textarea>
                </div>
                <div class="form-group">
                    <label for="contentMarkdown">Nội dung chính bài viết </label>
                    <textarea id="mainContentMarkdown" class="form-control"><%= post.descMarkdown%></textarea>
                </div>
                <div class="form-group">
                    <label for="contentMarkdown">Thông tin bài đăng</label>
                    <textarea id="contentMarkdown" class="form-control"><%= post.contentMarkdown%></textarea>
                </div>
                <button type="button" class="btn btn-primary" id="btnUpdatePost" data-post-id="<%= post.id %>">Cập
                    nhật</button>
            </form>
        </div>
    </div>
    <script>
        $(document).ready(function () {
            $(".supporter-list-posts").addClass("active");
        });
    </script>